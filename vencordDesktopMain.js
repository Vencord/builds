// Vencord 3a2a16a
// Standalone: true
// Platform: Universal
// Updater Disabled: false
"use strict";var Ge=Object.defineProperty;var $r=Object.getOwnPropertyDescriptor;var Kr=Object.getOwnPropertyNames;var Yr=Object.prototype.hasOwnProperty;var W=(t,e)=>()=>(t&&(e=t(t=0)),e);var te=(t,e)=>{for(var r in e)Ge(t,r,{get:e[r],enumerable:!0})},Jr=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of Kr(e))!Yr.call(t,i)&&i!==r&&Ge(t,i,{get:()=>e[i],enumerable:!(n=$r(e,i))||n.enumerable});return t};var Xr=t=>Jr(Ge({},"__esModule",{value:!0}),t);var c=W(()=>{"use strict"});async function It(t,e){try{var r=await fetch(t,e)}catch(i){throw i instanceof Error&&i.cause&&(i=i.cause),new Error(`${e?.method??"GET"} ${t} failed: ${i}`)}if(r.ok)return r;let n=`${e?.method??"GET"} ${t}: ${r.status} ${r.statusText}`;try{let i=await r.text();n+=`
${i}`}catch{}throw new Error(n)}async function Dt(t,e){return(await It(t,e)).json()}async function be(t,e){let n=await(await It(t,e)).arrayBuffer();return Buffer.from(n)}var rn,Ze=W(()=>{"use strict";c();rn=require("original-fs")});var pe=W(()=>{"use strict";c()});var de,Fe=W(()=>{c();de="3a2a16a"});var ne,je=W(()=>{c();ne="Vendicated/Vencord"});var Rt,Pt=W(()=>{"use strict";c();Fe();je();Rt=`Vencord/${de}${ne?` (https://github.com/${ne})`:""}`});function ve(t){return async function(){try{return{ok:!0,value:await t(...arguments)}}catch(e){return{ok:!1,error:e instanceof Error?{...e,message:e.message,name:e.name,stack:e.stack}:e}}}}var At,Ct=W(()=>{"use strict";c();At=["vencordDesktopMain.js","vencordDesktopPreload.js","vencordDesktopRenderer.js","vencordDesktopRenderer.css"]});var sn={};async function _t(t){return Dt(nn+t,{headers:{Accept:"application/vnd.github+json","User-Agent":Rt}})}async function on(){return await kt()?(await _t(`/compare/${de}...HEAD`)).commits.map(r=>({hash:r.sha.slice(0,7),author:r.author.login,message:r.commit.message.split(`
`)[0]})):[]}async function kt(){let t=await _t("/releases/latest");return t.name.slice(t.name.lastIndexOf(" ")+1)===de?!1:(t.assets.forEach(({name:r,browser_download_url:n})=>{At.some(i=>r.startsWith(i))&&We.push([r,n])}),!0)}async function an(){let t=await Promise.all(We.map(async([e,r])=>{let n=await be(r);return[(0,Ot.join)(__dirname,e),n]}));return await Promise.all(t.map(async([e,r])=>(0,Mt.writeFile)(e,r))),We=[],!0}var me,Mt,Ot,nn,We,zt=W(()=>{"use strict";c();Ze();pe();Pt();me=require("electron"),Mt=require("fs/promises"),Ot=require("path");Fe();je();Ct();nn=`https://api.github.com/repos/${ne}`,We=[];me.ipcMain.handle("VencordGetRepo",ve(()=>`https://github.com/${ne}`));me.ipcMain.handle("VencordGetUpdates",ve(on));me.ipcMain.handle("VencordUpdate",ve(kt));me.ipcMain.handle("VencordBuild",ve(an))});c();var ke=require("electron"),Zr=require("path");c();var Ne=require("electron"),re=["connect-src"],A=[...re,"img-src","media-src"],Et=["style-src","font-src"],O=[...A,...Et],Tt=[...O,"script-src","worker-src"],qr={"*.github.io":O,"github.com":O,"raw.githubusercontent.com":O,"*.gitlab.io":O,"gitlab.com":O,"*.codeberg.page":O,"codeberg.org":O,"*.githack.com":O,"jsdelivr.net":O,"fonts.googleapis.com":Et,"i.imgur.com":A,"i.ibb.co":A,"i.pinimg.com":A,"*.tenor.com":A,"cdn.discordapp.com":O,"media.discordapp.net":A,"cdnjs.cloudflare.com":Tt,"cdn.jsdelivr.net":Tt,"api.github.com":re,"ws.audioscrobbler.com":re,"translate-pa.googleapis.com":re,"*.vencord.dev":A,"manti.vendicated.dev":A,"decor.fieryflames.dev":re,"ugc.decor.fieryflames.dev":A,"sponsor.ajay.app":re,"dearrow-thumb.ajay.app":A,"usrbg.is-hardly.online":A,"icons.duckduckgo.com":A},Ve=(t,e)=>Object.keys(t).find(r=>r.toLowerCase()===e),Qr=t=>{let e={};return t.split(";").forEach(r=>{let[n,...i]=r.trim().split(/\s+/g);n&&!Object.prototype.hasOwnProperty.call(e,n)&&(e[n]=i)}),e},en=t=>Object.entries(t).filter(([,e])=>e?.length).map(e=>e.flat().join(" ")).join("; "),tn=t=>{let e=Ve(t,"content-security-policy-report-only");e&&delete t[e];let r=Ve(t,"content-security-policy");if(r){let n=Qr(t[r][0]),i=(a,...o)=>{n[a]??=[...n["default-src"]??[]],n[a].push(...o)};i("style-src","'unsafe-inline'"),i("script-src","'unsafe-inline'","'unsafe-eval'");for(let a of["style-src","connect-src","img-src","font-src","media-src","worker-src"])i(a,"blob:","data:","vencord:");for(let[a,o]of Object.entries(qr))for(let s of o)i(s,a);t[r]=[en(n)]}};function bt(){Ne.session.defaultSession.webRequest.onHeadersReceived(({responseHeaders:t,resourceType:e},r)=>{if(t&&(e==="mainFrame"&&tn(t),e==="stylesheet")){let n=Ve(t,"content-type");n&&(t[n]=["text/css"])}r({cancel:!1,responseHeaders:t})}),Ne.session.defaultSession.webRequest.onHeadersReceived=()=>{}}c();c();zt();c();pe();var ot=require("electron");c();var Ye={};te(Ye,{fetchTrackData:()=>mn});c();c();c();c();var y=11400714785074694791n,T=14029467366897019727n,Ut=1609587929392839161n,ge=9650029242287828579n,Lt=2870177450012600261n,Nt=64n,cn=2n**Nt-1n,ln=new TextEncoder;function Gt(t,e,r,n){return BigInt(t)|BigInt(e)<<16n|BigInt(r)<<32n|BigInt(n)<<48n}function V(t,e){return BigInt(t[e])|BigInt(t[e+1])<<8n|BigInt(t[e+2])<<16n|BigInt(t[e+3])<<24n|BigInt(t[e+4])<<32n|BigInt(t[e+5])<<40n|BigInt(t[e+6])<<48n|BigInt(t[e+7])<<56n}function w(t,e){return t<<e&cn|t>>Nt-e}function h(t){return BigInt.asUintN(64,t)}var He=class{#t;#r;#n;#i;#o;#a;#s;#e;constructor(e=0){this.reset(e)}reset(e=this.#t){return this.#t=BigInt.asUintN(32,BigInt(e)),this.#r=h(this.#t+y+T),this.#n=h(this.#t+T),this.#i=this.#t,this.#o=h(this.#t-y),this.#a=null,this.#s=0,this.#e=0,this}update(e){typeof e=="string"&&(e=ln.encode(e));let r=0,n=e.length,i=r+n;if(n===0)return this;if(this.#s+=n,this.#e===0&&(this.#a=new Uint8Array(32)),this.#e+n<32)return this.#a.set(e.subarray(0,n),this.#e),this.#e+=n,this;if(this.#e>0){this.#a.set(e.subarray(0,32-this.#e),this.#e);let a=0,o;o=V(this.#a,a),this.#r=h(w(h(this.#r+o*T),31n)*y),a+=8,o=V(this.memory,a),this.#n=h(w(h(this.#n+o*T),31n)*y),a+=8,o=V(this.memory,a),this.#i=h(w(h(this.#i+o*T),31n)*y),a+=8,o=V(this.memory,a),this.#o=h(w(h(this.#o+o*T),31n)*y),r+=32-this.#e,this.#e=0}if(r<=i-32){let a=i-32;do{let o;o=V(e,r),this.#r=h(w(h(this.#r+o*T),31n)*y),r+=8,o=V(e,r),this.#n=h(w(h(this.#n+o*T),31n)*y),r+=8,o=V(e,r),this.#i=h(w(h(this.#i+o*T),31n)*y),r+=8,o=V(e,r),this.#o=h(w(h(this.#o+o*T),31n)*y),r+=8}while(r<=a)}return r<i&&(this.#a.set(e.subarray(r,i),this.#e),this.#e=i-r),this}digest(){let e=this.#a,r=this.#e,n=0,i=0n,a=0n,o=0n;for(this.#s>=32?(i=w(this.#r,1n)+w(this.#n,7n)+w(this.#i,12n)+w(this.#o,18n),i=h(i^w(h(this.#r*T),31n)*y),i=h(i*y+ge),i=h(i^w(h(this.#n*T),31n)*y),i=h(i*y+ge),i=h(i^w(h(this.#i*T),31n)*y),i=h(i*y+ge),i=h(i^w(h(this.#o*T),31n)*y),i=h(i*y+ge)):i=h(this.#t+Lt),i+=BigInt(this.#s);n<=r-8;)o=V(e,n),o=h(w(h(o*T),31n)*y),i=h(w(i^o,27n)*y+ge),n+=8;for(n+4<=r&&(o=Gt(e[n+1]<<8|e[n],e[n+3]<<8|e[n+2],0,0),i=h(w(i^h(o*y),23n)*T+Ut),n+=4);n<r;)o=Gt(e[n++],0,0,0),i=h(w(i^h(o*Lt),11n)*y);return a=h(i>>33n),i=h((i^a)*T),a=h(i>>29n),i=h((i^a)*Ut),a=h(i>>32n),i=h(i^a),i}};function Vt(t,e=0){return new He(e).update(t).digest()}var ie="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),un=(()=>{let t=new Uint8Array(4),e=new Uint32Array(t.buffer);return!((e[0]=1)&t[0])})();function hn(t){t=BigInt(t);let e=[],r=Math.ceil(Math.floor(Math.log2(Number(t))+1)/8);for(let i=0;i<r;i++)e.unshift(Number(t>>BigInt(8*i)&BigInt(255)));let n=new Uint8Array(e);return un?n:n.reverse()}function Zt(t){let e=Vt(t,0),r=hn(e);return[ie[r[0]>>2],ie[(r[0]&3)<<4|r[1]>>4],ie[(r[1]&15)<<2|r[2]>>6],ie[r[2]&63],ie[r[3]>>2],ie[(r[3]&3)<<4|r[3]>>4]].join("")}function Ft(t){let e=typeof t=="string"?t:t.source;if(e=e.replaceAll(/#{intl::([\w$+/]*)(?:::(\w+))?}/g,(i,a,o)=>{let s=o==="raw"?a:Zt(a),u=typeof t=="string";return!Number.isNaN(Number(s[0]))||s.includes("+")||s.includes("/")?u?`["${s}"]`:String.raw`(?:\["${s}"\])`.replaceAll("+","\\+"):u?`.${s}`:String.raw`(?:\.${s})`}),typeof t=="string")return e;let r=e.replaceAll("\\i",String.raw`(?:[A-Za-z_$][\w$]*)`),n=new RegExp(r,t.flags);return n.toString=t.toString.bind(t),n}var jt=require("child_process"),Wt=require("util"),Bt=(0,Wt.promisify)(jt.execFile);async function $e(t){let{stdout:e}=await Bt("osascript",t.map(r=>["-e",r]).flat());return e}var _=null,fn=/<script type="module" crossorigin src="([a-zA-Z0-9.\-/]+)"><\/script>/,pn=Ft(/Promise.allSettled\(\i\)\}const \i="([A-Za-z0-9-_]*\.[A-Za-z0-9-_]*\.[A-Za-z0-9-_]*)"/),Ke,dn=async()=>{if(Ke)return Ke;let t=await fetch("https://music.apple.com/").then(i=>i.text()),e=new URL(t.match(fn)[1],"https://music.apple.com/"),n=(await fetch(e).then(i=>i.text())).match(pn)[1];return Ke=n,n};async function vn({id:t,name:e,artist:r,album:n}){if(t===_?.id){if("data"in _)return _.data;if("failures"in _&&_.failures>=5)return null}try{let i=new URL("https://amp-api-edge.music.apple.com/v1/catalog/us/search");i.searchParams.set("platform","web"),i.searchParams.set("l","en-US"),i.searchParams.set("limit","1"),i.searchParams.set("with","serverBubbles"),i.searchParams.set("types","songs"),i.searchParams.set("term",`${e} ${r} ${n}`),i.searchParams.set("include[songs]","artists");let a=await dn(),o=await fetch(i,{headers:{accept:"*/*","accept-language":"en-US,en;q=0.9",authorization:`Bearer ${a}`,"user-agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/128.0.0.0 Safari/537.36",origin:"https://music.apple.com"}}).then(s=>s.json()).then(s=>s.results.song.data[0]);return _={id:t,data:{appleMusicLink:o.attributes.url,songLink:`https://song.link/i/${o.id}`,albumArtwork:o.attributes.artwork.url.replace("{w}x{h}","512x512"),artistArtwork:o.relationships.artists.data[0].attributes.artwork.url.replace("{w}x{h}","512x512")}},_.data}catch(i){return console.error("[AppleMusicRichPresence] Failed to fetch remote data:",i),_={id:t,failures:(t===_?.id&&"failures"in _?_.failures:0)+1},null}}async function mn(){try{await Bt("pgrep",["^Music$"])}catch{return null}if(await $e(['tell application "Music"',"get player state","end tell"]).then(d=>d.trim())!=="playing")return null;let e=await $e(['tell application "Music"',"get player position","end tell"]).then(d=>Number.parseFloat(d.trim())),r=await $e(['set output to ""','tell application "Music"',"set t_id to database id of current track","set t_name to name of current track","set t_album to album of current track","set t_artist to artist of current track","set t_duration to duration of current track",'set output to "" & t_id & "\\n" & t_name & "\\n" & t_album & "\\n" & t_artist & "\\n" & t_duration',"end tell","return output"]),[n,i,a,o,s]=r.split(`
`).filter(d=>!!d),u=Number.parseFloat(s),m=await vn({id:n,name:i,artist:o,album:a});return{name:i,album:a,artist:o,playerPosition:e,duration:u,...m}}var Je={};te(Je,{initDevtoolsOpenEagerLoad:()=>gn});c();function gn(t){let e=()=>t.sender.executeJavaScript("Vencord.Plugins.plugins.ConsoleShortcuts.eagerLoad(true)");t.sender.isDevToolsOpened()?e():t.sender.once("devtools-opened",()=>e())}var Qt={};c();c();pe();c();var Xe=Symbol("SettingsStore.isProxy"),Ht=Symbol("SettingsStore.getRawTarget"),ye=class{pathListeners=new Map;globalListeners=new Set;proxyContexts=new WeakMap;proxyHandler=(()=>{let e=this;return{get(r,n,i){if(n===Xe)return!0;if(n===Ht)return r;let a=Reflect.get(r,n,i),o=e.proxyContexts.get(r);if(o==null)return a;let{root:s,path:u}=o;if(!(n in r)&&e.getDefaultValue!=null&&(a=e.getDefaultValue({target:r,key:n,root:s,path:u})),typeof a=="object"&&a!==null&&!a[Xe]){let m=`${u}${u&&"."}${n}`;return e.makeProxy(a,s,m)}return a},set(r,n,i){if(i?.[Xe]&&(i=i[Ht]),r[n]===i)return!0;if(!Reflect.set(r,n,i))return!1;let a=e.proxyContexts.get(r);if(a==null)return!0;let{root:o,path:s}=a,u=`${s}${s&&"."}${n}`;return e.notifyListeners(u,i,o),!0},deleteProperty(r,n){if(!Reflect.deleteProperty(r,n))return!1;let i=e.proxyContexts.get(r);if(i==null)return!0;let{root:a,path:o}=i,s=`${o}${o&&"."}${n}`;return e.notifyListeners(s,void 0,a),!0}}})();constructor(e,r={}){this.plain=e,this.store=this.makeProxy(e),Object.assign(this,r)}makeProxy(e,r=e,n=""){return this.proxyContexts.set(e,{root:r,path:n}),new Proxy(e,this.proxyHandler)}notifyListeners(e,r,n){let i=e.split(".");if(i.length>2&&i[0]==="plugins"){let a=i.slice(0,3),o=a.join("."),s=a.reduce((u,m)=>u[m],n);this.globalListeners.forEach(u=>u(n,o)),this.pathListeners.get(o)?.forEach(u=>u(s))}else this.globalListeners.forEach(a=>a(n,e));this.pathListeners.get(e)?.forEach(a=>a(r))}setData(e,r){if(this.readOnly)throw new Error("SettingsStore is read-only");if(this.plain=e,this.store=this.makeProxy(e),r){let n=e,i=r.split(".");for(let a of i){if(!n){console.warn(`Settings#setData: Path ${r} does not exist in new data. Not dispatching update`);return}n=n[a]}this.pathListeners.get(r)?.forEach(a=>a(n))}this.markAsChanged()}addGlobalChangeListener(e){this.globalListeners.add(e)}addChangeListener(e,r){let n=this.pathListeners.get(e)??new Set;n.add(r),this.pathListeners.set(e,n)}removeGlobalChangeListener(e){this.globalListeners.delete(e)}removeChangeListener(e,r){let n=this.pathListeners.get(e);n&&(n.delete(r),n.size||this.pathListeners.delete(e))}markAsChanged(){this.globalListeners.forEach(e=>e(this.plain,""))}};c();function qe(t,e){for(let r in e){let n=e[r];typeof n=="object"&&!Array.isArray(n)?(t[r]??={},qe(t[r],n)):t[r]??=n}return t}var Re=require("electron"),K=require("fs");c();var $t=require("electron"),B=require("path"),Ie=process.env.VENCORD_USER_DATA_DIR??(process.env.DISCORD_USER_DATA_DIR?(0,B.join)(process.env.DISCORD_USER_DATA_DIR,"..","VencordData"):(0,B.join)($t.app.getPath("userData"),"..","Vencord")),oe=(0,B.join)(Ie,"settings"),$=(0,B.join)(Ie,"themes"),De=(0,B.join)(oe,"quickCss.css"),Qe=(0,B.join)(oe,"settings.json"),et=(0,B.join)(oe,"native-settings.json"),Kt=["https:","http:","steam:","spotify:","com.epicgames.launcher:","tidal:","itunes:"];(0,K.mkdirSync)(oe,{recursive:!0});function Jt(t,e){try{return JSON.parse((0,K.readFileSync)(e,"utf-8"))}catch(r){return r?.code!=="ENOENT"&&console.error(`Failed to read ${t} settings`,r),{}}}var C=new ye(Jt("renderer",Qe));C.addGlobalChangeListener(()=>{try{(0,K.writeFileSync)(Qe,JSON.stringify(C.plain,null,4))}catch(t){console.error("Failed to write renderer settings",t)}});Re.ipcMain.handle("VencordGetSettingsDir",()=>oe);Re.ipcMain.on("VencordGetSettings",t=>t.returnValue=C.plain);Re.ipcMain.handle("VencordSetSettings",(t,e,r)=>{C.setData(e,r)});var yn={plugins:{}},Xt=Jt("native",et);qe(Xt,yn);var Yt=new ye(Xt);Yt.addGlobalChangeListener(()=>{try{(0,K.writeFileSync)(et,JSON.stringify(Yt.plain,null,4))}catch(t){console.error("Failed to write native settings",t)}});var qt=require("electron");qt.app.on("browser-window-created",(t,e)=>{e.webContents.on("frame-created",(r,{frame:n})=>{n?.once("dom-ready",()=>{if(n.url.startsWith("https://open.spotify.com/embed/")){let i=C.store.plugins?.FixSpotifyEmbeds;if(!i?.enabled)return;n.executeJavaScript(`
                    const original = Audio.prototype.play;
                    Audio.prototype.play = function() {
                        this.volume = ${i.volume/100||.1};
                        return original.apply(this, arguments);
                    }
                `)}})})});var tr={};c();var er=require("electron");er.app.on("browser-window-created",(t,e)=>{e.webContents.on("frame-created",(r,{frame:n})=>{n?.once("dom-ready",()=>{if(n.url.startsWith("https://www.youtube.com/")){if(!C.store.plugins?.FixYoutubeEmbeds?.enabled)return;n.executeJavaScript(`
                new MutationObserver(() => {
                    if(
                        document.querySelector('div.ytp-error-content-wrap-subreason a[href*="www.youtube.com/watch?v="]')
                    ) location.reload()
                }).observe(document.body, { childList: true, subtree:true });
                `)}})})});var tt={};te(tt,{resolveRedirect:()=>Sn});c();var rr=require("https"),wn=/^https:\/\/(spotify\.link|s\.team)\/.+$/;function nr(t){return new Promise((e,r)=>{let n=(0,rr.request)(new URL(t),{method:"HEAD"},i=>{e(i.headers.location?nr(i.headers.location):t)});n.on("error",r),n.end()})}async function Sn(t,e){return wn.test(e)?nr(e):e}var rt={};te(rt,{makeDeeplTranslateRequest:()=>xn});c();async function xn(t,e,r,n){let i=e?"https://api.deepl.com/v2/translate":"https://api-free.deepl.com/v2/translate";try{let a=await fetch(i,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`DeepL-Auth-Key ${r}`},body:n}),o=await a.text();return{status:a.status,data:o}}catch(a){return{status:-1,data:String(a)}}}var nt={};te(nt,{readRecording:()=>Tn});c();var ir=require("electron"),or=require("fs/promises"),we=require("path");async function Tn(t,e){e=(0,we.normalize)(e);let r=(0,we.basename)(e),n=(0,we.normalize)(ir.app.getPath("userData")+"/");if(console.log(r,n,e),r!=="recording.ogg"||!e.startsWith(n))return null;try{let i=await(0,or.readFile)(e);return new Uint8Array(i.buffer)}catch{return null}}var it={};te(it,{sendToOverlay:()=>En});c();var sr=require("dgram"),ar;function En(t,e){e.messageType=e.type;let r=JSON.stringify(e);ar??=(0,sr.createSocket)("udp4"),ar.send(r,42069,"127.0.0.1")}var ur={};c();var lr=require("electron");c();var cr=`"use strict";const hiddenCSS=["#__ffYoutube1","#__ffYoutube2","#__ffYoutube3","#__ffYoutube4","#feed-pyv-container","#feedmodule-PRO","#homepage-chrome-side-promo","#merch-shelf","#offer-module",'#pla-shelf > ytd-pla-shelf-renderer[class="style-scope ytd-watch"]',"#pla-shelf","#premium-yva","#promo-info","#promo-list","#promotion-shelf","#related > ytd-watch-next-secondary-results-renderer > #items > ytd-compact-promoted-video-renderer.ytd-watch-next-secondary-results-renderer","#search-pva","#shelf-pyv-container","#video-masthead","#watch-branded-actions","#watch-buy-urls","#watch-channel-brand-div","#watch7-branded-banner","#YtKevlarVisibilityIdentifier","#YtSparklesVisibilityIdentifier",".carousel-offer-url-container",".companion-ad-container",".GoogleActiveViewElement",'.list-view[style="margin: 7px 0pt;"]',".promoted-sparkles-text-search-root-container",".promoted-videos",".searchView.list-view",".sparkles-light-cta",".watch-extra-info-column",".watch-extra-info-right",".ytd-carousel-ad-renderer",".ytd-compact-promoted-video-renderer",".ytd-companion-slot-renderer",".ytd-merch-shelf-renderer",".ytd-player-legacy-desktop-watch-ads-renderer",".ytd-promoted-sparkles-text-search-renderer",".ytd-promoted-video-renderer",".ytd-search-pyv-renderer",".ytd-video-masthead-ad-v3-renderer",".ytp-ad-action-interstitial-background-container",".ytp-ad-action-interstitial-slot",".ytp-ad-image-overlay",".ytp-ad-overlay-container",".ytp-ad-progress",".ytp-ad-progress-list",'[class*="ytd-display-ad-"]','[layout*="display-ad-"]','a[href^="http://www.youtube.com/cthru?"]','a[href^="https://www.youtube.com/cthru?"]',"ytd-action-companion-ad-renderer","ytd-banner-promo-renderer","ytd-compact-promoted-video-renderer","ytd-companion-slot-renderer","ytd-display-ad-renderer","ytd-promoted-sparkles-text-search-renderer","ytd-promoted-sparkles-web-renderer","ytd-search-pyv-renderer","ytd-single-option-survey-renderer","ytd-video-masthead-ad-advertiser-info-renderer","ytd-video-masthead-ad-v3-renderer","YTM-PROMOTED-VIDEO-RENDERER"],hideElements=()=>{const e=hiddenCSS;if(!e)return;const t=e.join(", ")+" { display: none!important; }",r=document.createElement("style");r.textContent=t,document.head.appendChild(r)},observeDomChanges=e=>{new MutationObserver(r=>{e(r)}).observe(document.documentElement,{childList:!0,subtree:!0})},hideDynamicAds=()=>{const e=document.querySelectorAll("#contents > ytd-rich-item-renderer ytd-display-ad-renderer");e.length!==0&&e.forEach(t=>{if(t.parentNode&&t.parentNode.parentNode){const r=t.parentNode.parentNode;r.localName==="ytd-rich-item-renderer"&&(r.style.display="none")}})},autoSkipAds=()=>{if(document.querySelector(".ad-showing")){const e=document.querySelector("video");e&&e.duration&&(e.currentTime=e.duration,setTimeout(()=>{const t=document.querySelector("button.ytp-ad-skip-button");t&&t.click()},100))}},overrideObject=(e,t,r)=>{if(!e)return!1;let n=!1;for(const o in e)e.hasOwnProperty(o)&&o===t?(e[o]=r,n=!0):e.hasOwnProperty(o)&&typeof e[o]=="object"&&overrideObject(e[o],t,r)&&(n=!0);return n},jsonOverride=(e,t)=>{const r=JSON.parse;JSON.parse=(...n)=>{const o=r.apply(this,n);return overrideObject(o,e,t),o},Response.prototype.json=new Proxy(Response.prototype.json,{async apply(...n){const o=await Reflect.apply(...n);return overrideObject(o,e,t),o}})};jsonOverride("adPlacements",[]),jsonOverride("playerAds",[]),hideElements(),hideDynamicAds(),autoSkipAds(),observeDomChanges(()=>{hideDynamicAds(),autoSkipAds()});
`;lr.app.on("browser-window-created",(t,e)=>{e.webContents.on("frame-created",(r,{frame:n})=>{n?.once("dom-ready",()=>{C.store.plugins?.YoutubeAdblock?.enabled&&(n.url.includes("youtube.com/embed/")||n.url.includes("discordsays")&&n.url.includes("youtube.com"))&&n.executeJavaScript(cr)})})});var hr={AppleMusicRichPresence:Ye,ConsoleShortcuts:Je,FixSpotifyEmbeds:Qt,FixYoutubeEmbeds:tr,OpenInApp:tt,Translate:rt,VoiceMessages:nt,XSOverlay:it,YoutubeAdblock:ur};var fr={};for(let[t,e]of Object.entries(hr)){let r=Object.entries(e);if(!r.length)continue;let n=fr[t]={};for(let[i,a]of r){let o=`VencordPluginNative_${t}_${i}`;ot.ipcMain.handle(o,a),n[i]=o}}ot.ipcMain.on("VencordGetPluginIpcMethodMap",t=>{t.returnValue=fr});c();pe();var S=require("electron");c();var pr="PCFkb2N0eXBlIGh0bWw+PGh0bWwgbGFuZz0iZW4iPjxoZWFkPjxtZXRhIGNoYXJzZXQ9InV0Zi04Ij48dGl0bGU+VmVuY29yZCBRdWlja0NTUyBFZGl0b3I8L3RpdGxlPjxsaW5rIHJlbD0ic3R5bGVzaGVldCIgaHJlZj0iaHR0cHM6Ly9jZG4uanNkZWxpdnIubmV0L25wbS9tb25hY28tZWRpdG9yQDAuNTAuMC9taW4vdnMvZWRpdG9yL2VkaXRvci5tYWluLmNzcyIgaW50ZWdyaXR5PSJzaGEyNTYtdGlKUFEyTzA0ei9wWi9Bd2R5SWdock9NemV3ZitQSXZFbDFZS2JRdnNaaz0iIGNyb3Nzb3JpZ2luPSJhbm9ueW1vdXMiIHJlZmVycmVycG9saWN5PSJuby1yZWZlcnJlciI+PHN0eWxlPiNjb250YWluZXIsYm9keSxodG1se3Bvc2l0aW9uOmFic29sdXRlO2xlZnQ6MDt0b3A6MDt3aWR0aDoxMDAlO2hlaWdodDoxMDAlO21hcmdpbjowO3BhZGRpbmc6MDtvdmVyZmxvdzpoaWRkZW59PC9zdHlsZT48L2hlYWQ+PGJvZHk+PGRpdiBpZD0iY29udGFpbmVyIj48L2Rpdj48c2NyaXB0IHNyYz0iaHR0cHM6Ly9jZG4uanNkZWxpdnIubmV0L25wbS9tb25hY28tZWRpdG9yQDAuNTAuMC9taW4vdnMvbG9hZGVyLmpzIiBpbnRlZ3JpdHk9InNoYTI1Ni1LY1U0OFRHcjg0cjd1bkY3SjVJZ0JvOTVhZVZyRWJyR2UwNFM3VGNGVWpzPSIgY3Jvc3NvcmlnaW49ImFub255bW91cyIgcmVmZXJyZXJwb2xpY3k9Im5vLXJlZmVycmVyIj48L3NjcmlwdD48c2NyaXB0PnJlcXVpcmUuY29uZmlnKHtwYXRoczp7dnM6Imh0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9ucG0vbW9uYWNvLWVkaXRvckAwLjUwLjAvbWluL3ZzIn19KSxyZXF1aXJlKFsidnMvZWRpdG9yL2VkaXRvci5tYWluIl0sKCgpPT57Z2V0Q3VycmVudENzcygpLnRoZW4oKGU9Pnt2YXIgdD1tb25hY28uZWRpdG9yLmNyZWF0ZShkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiY29udGFpbmVyIikse3ZhbHVlOmUsbGFuZ3VhZ2U6ImNzcyIsdGhlbWU6Z2V0VGhlbWUoKX0pO3Qub25EaWRDaGFuZ2VNb2RlbENvbnRlbnQoKCgpPT5zZXRDc3ModC5nZXRWYWx1ZSgpKSkpLHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJyZXNpemUiLCgoKT0+e3QubGF5b3V0KCl9KSl9KSl9KSk8L3NjcmlwdD48L2JvZHk+PC9odG1sPg==";var Se=require("fs"),se=require("fs/promises"),ae=require("path");c();var bn=/[^\S\r\n]*?\r?(?:\r\n|\n)[^\S\r\n]*?\*[^\S\r\n]?/,In=/^\\@/;function at(t,e={}){return{fileName:t,name:e.name??t.replace(/\.css$/i,""),author:e.author??"Unknown Author",description:e.description??"A Discord Theme.",version:e.version,license:e.license,source:e.source,website:e.website,invite:e.invite}}function dr(t){return t.charCodeAt(0)===65279&&(t=t.slice(1)),t}function vr(t,e){if(!t)return at(e);let r=t.split("/**",2)?.[1]?.split("*/",1)?.[0];if(!r)return at(e);let n={},i="",a="";for(let o of r.split(bn))if(o.length!==0)if(o.charAt(0)==="@"&&o.charAt(1)!==" "){n[i]=a.trim();let s=o.indexOf(" ");i=o.substring(1,s),a=o.substring(s+1)}else a+=" "+o.replace("\\n",`
`).replace(In,"@");return n[i]=a.trim(),delete n[""],at(e,n)}c();var mr=require("electron");function gr(t){t.webContents.setWindowOpenHandler(({url:e})=>{switch(e){case"about:blank":case"https://discord.com/popout":case"https://ptb.discord.com/popout":case"https://canary.discord.com/popout":return{action:"allow"}}try{var{protocol:r}=new URL(e)}catch{return{action:"deny"}}switch(r){case"http:":case"https:":case"mailto:":case"steam:":case"spotify:":mr.shell.openExternal(e)}return{action:"deny"}})}(0,Se.mkdirSync)($,{recursive:!0});function st(t,e){let r=(0,ae.normalize)(t),n=(0,ae.join)(t,e),i=(0,ae.normalize)(n);return i.startsWith(r)?i:null}function Dn(){return(0,se.readFile)(De,"utf-8").catch(()=>"")}async function Rn(){let t=await(0,se.readdir)($).catch(()=>[]),e=[];for(let r of t){if(!r.endsWith(".css"))continue;let n=await yr(r).then(dr).catch(()=>null);n!=null&&e.push(vr(n,r))}return e}function yr(t){t=t.replace(/\?v=\d+$/,"");let e=st($,t);return e?(0,se.readFile)(e,"utf-8"):Promise.reject(`Unsafe path ${t}`)}S.ipcMain.handle("VencordOpenQuickCss",()=>S.shell.openPath(De));S.ipcMain.handle("VencordOpenExternal",(t,e)=>{try{var{protocol:r}=new URL(e)}catch{throw"Malformed URL"}if(!Kt.includes(r))throw"Disallowed protocol.";S.shell.openExternal(e)});S.ipcMain.handle("VencordGetQuickCss",()=>Dn());S.ipcMain.handle("VencordSetQuickCss",(t,e)=>(0,Se.writeFileSync)(De,e));S.ipcMain.handle("VencordGetThemesDir",()=>$);S.ipcMain.handle("VencordGetThemesList",()=>Rn());S.ipcMain.handle("VencordGetThemeData",(t,e)=>yr(e));S.ipcMain.handle("VencordGetThemeSystemValues",()=>({"os-accent-color":`#${S.systemPreferences.getAccentColor?.()||""}`}));S.ipcMain.handle("VencordOpenMonacoEditor",async()=>{let t="Vencord QuickCSS Editor",e=S.BrowserWindow.getAllWindows().find(n=>n.title===t);if(e&&!e.isDestroyed()){e.focus();return}let r=new S.BrowserWindow({title:t,autoHideMenuBar:!0,darkTheme:!0,webPreferences:{preload:(0,ae.join)(__dirname,"vencordDesktopPreload.js"),contextIsolation:!0,nodeIntegration:!1,sandbox:!1}});gr(r),await r.loadURL(`data:text/html;base64,${pr}`)});c();var Gr=require("electron");c();var xr=require("module"),Pn=(0,xr.createRequire)("/"),Ae,An=";var __w=require('worker_threads');__w.parentPort.on('message',function(m){onmessage({data:m})}),postMessage=function(m,t){__w.parentPort.postMessage(m,t)},close=process.exit;self=global";try{Ae=Pn("worker_threads").Worker}catch{}var Cn=Ae?function(t,e,r,n,i){var a=!1,o=new Ae(t+An,{eval:!0}).on("error",function(s){return i(s,null)}).on("message",function(s){return i(null,s)}).on("exit",function(s){s&&!a&&i(new Error("exited with code "+s),null)});return o.postMessage(r,n),o.terminate=function(){return a=!0,Ae.prototype.terminate.call(o)},o}:function(t,e,r,n,i){setImmediate(function(){return i(new Error("async operations unsupported - update to Node 12+ (or Node 10-11 with the --experimental-worker CLI flag)"),null)});var a=function(){};return{terminate:a,postMessage:a}},I=Uint8Array,Y=Uint16Array,Tr=Int32Array,ut=new I([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),ht=new I([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Er=new I([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),br=function(t,e){for(var r=new Y(31),n=0;n<31;++n)r[n]=e+=1<<t[n-1];for(var i=new Tr(r[30]),n=1;n<30;++n)for(var a=r[n];a<r[n+1];++a)i[a]=a-r[n]<<5|n;return{b:r,r:i}},Ir=br(ut,2),ft=Ir.b,Mn=Ir.r;ft[28]=258,Mn[258]=28;var Dr=br(ht,0),Rr=Dr.b,Co=Dr.r,Oe=new Y(32768);for(v=0;v<32768;++v)Z=(v&43690)>>1|(v&21845)<<1,Z=(Z&52428)>>2|(Z&13107)<<2,Z=(Z&61680)>>4|(Z&3855)<<4,Oe[v]=((Z&65280)>>8|(Z&255)<<8)>>1;var Z,v,ce=function(t,e,r){for(var n=t.length,i=0,a=new Y(e);i<n;++i)t[i]&&++a[t[i]-1];var o=new Y(e);for(i=1;i<e;++i)o[i]=o[i-1]+a[i-1]<<1;var s;if(r){s=new Y(1<<e);var u=15-e;for(i=0;i<n;++i)if(t[i])for(var m=i<<4|t[i],d=e-t[i],l=o[t[i]-1]++<<d,g=l|(1<<d)-1;l<=g;++l)s[Oe[l]>>u]=m}else for(s=new Y(n),i=0;i<n;++i)t[i]&&(s[i]=Oe[o[t[i]-1]++]>>15-t[i]);return s},xe=new I(288);for(v=0;v<144;++v)xe[v]=8;var v;for(v=144;v<256;++v)xe[v]=9;var v;for(v=256;v<280;++v)xe[v]=7;var v;for(v=280;v<288;++v)xe[v]=8;var v,Pr=new I(32);for(v=0;v<32;++v)Pr[v]=5;var v;var Ar=ce(xe,9,1);var Cr=ce(Pr,5,1),Ce=function(t){for(var e=t[0],r=1;r<t.length;++r)t[r]>e&&(e=t[r]);return e},M=function(t,e,r){var n=e/8|0;return(t[n]|t[n+1]<<8)>>(e&7)&r},Me=function(t,e){var r=e/8|0;return(t[r]|t[r+1]<<8|t[r+2]<<16)>>(e&7)},Mr=function(t){return(t+7)/8|0},_e=function(t,e,r){return(e==null||e<0)&&(e=0),(r==null||r>t.length)&&(r=t.length),new I(t.subarray(e,r))};var Or=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],b=function(t,e,r){var n=new Error(e||Or[t]);if(n.code=t,Error.captureStackTrace&&Error.captureStackTrace(n,b),!r)throw n;return n},_r=function(t,e,r,n){var i=t.length,a=n?n.length:0;if(!i||e.f&&!e.l)return r||new I(0);var o=!r,s=o||e.i!=2,u=e.i;o&&(r=new I(i*3));var m=function(wt){var St=r.length;if(wt>St){var xt=new I(Math.max(St*2,wt));xt.set(r),r=xt}},d=e.f||0,l=e.p||0,g=e.b||0,z=e.l,J=e.d,G=e.m,D=e.n,R=i*8;do{if(!z){d=M(t,l,1);var F=M(t,l+1,3);if(l+=3,F)if(F==1)z=Ar,J=Cr,G=9,D=5;else if(F==2){var ue=M(t,l,31)+257,Te=M(t,l+10,15)+4,H=ue+M(t,l+5,31)+1;l+=14;for(var P=new I(H),q=new I(19),x=0;x<Te;++x)q[Er[x]]=M(t,l+x*3,7);l+=Te*3;for(var he=Ce(q),Fr=(1<<he)-1,jr=ce(q,he,1),x=0;x<H;){var dt=jr[M(t,l,Fr)];l+=dt&15;var E=dt>>4;if(E<16)P[x++]=E;else{var Q=0,Ee=0;for(E==16?(Ee=3+M(t,l,3),l+=2,Q=P[x-1]):E==17?(Ee=3+M(t,l,7),l+=3):E==18&&(Ee=11+M(t,l,127),l+=7);Ee--;)P[x++]=Q}}var vt=P.subarray(0,ue),j=P.subarray(ue);G=Ce(vt),D=Ce(j),z=ce(vt,G,1),J=ce(j,D,1)}else b(1);else{var E=Mr(l)+4,N=t[E-4]|t[E-3]<<8,X=E+N;if(X>i){u&&b(0);break}s&&m(g+N),r.set(t.subarray(E,X),g),e.b=g+=N,e.p=l=X*8,e.f=d;continue}if(l>R){u&&b(0);break}}s&&m(g+131072);for(var Wr=(1<<G)-1,Br=(1<<D)-1,ze=l;;ze=l){var Q=z[Me(t,l)&Wr],ee=Q>>4;if(l+=Q&15,l>R){u&&b(0);break}if(Q||b(2),ee<256)r[g++]=ee;else if(ee==256){ze=l,z=null;break}else{var mt=ee-254;if(ee>264){var x=ee-257,fe=ut[x];mt=M(t,l,(1<<fe)-1)+ft[x],l+=fe}var Ue=J[Me(t,l)&Br],Le=Ue>>4;Ue||b(3),l+=Ue&15;var j=Rr[Le];if(Le>3){var fe=ht[Le];j+=Me(t,l)&(1<<fe)-1,l+=fe}if(l>R){u&&b(0);break}s&&m(g+131072);var gt=g+mt;if(g<j){var yt=a-j,Hr=Math.min(j,gt);for(yt+g<0&&b(3);g<Hr;++g)r[g]=n[yt+g]}for(;g<gt;++g)r[g]=r[g-j]}}e.l=z,e.p=ze,e.b=g,e.f=d,z&&(d=1,e.m=G,e.d=J,e.n=D)}while(!d);return g!=r.length&&o?_e(r,0,g):r.subarray(0,g)};var On=new I(0);var _n=function(t,e){var r={};for(var n in t)r[n]=t[n];for(var n in e)r[n]=e[n];return r},wr=function(t,e,r){for(var n=t(),i=t.toString(),a=i.slice(i.indexOf("[")+1,i.lastIndexOf("]")).replace(/\s+/g,"").split(","),o=0;o<n.length;++o){var s=n[o],u=a[o];if(typeof s=="function"){e+=";"+u+"=";var m=s.toString();if(s.prototype)if(m.indexOf("[native code]")!=-1){var d=m.indexOf(" ",8)+1;e+=m.slice(d,m.indexOf("(",d))}else{e+=m;for(var l in s.prototype)e+=";"+u+".prototype."+l+"="+s.prototype[l].toString()}else e+=m}else r[u]=s}return e},Pe=[],kn=function(t){var e=[];for(var r in t)t[r].buffer&&e.push((t[r]=new t[r].constructor(t[r])).buffer);return e},zn=function(t,e,r,n){if(!Pe[r]){for(var i="",a={},o=t.length-1,s=0;s<o;++s)i=wr(t[s],i,a);Pe[r]={c:wr(t[o],i,a),e:a}}var u=_n({},Pe[r].e);return Cn(Pe[r].c+";onmessage=function(e){for(var k in e.data)self[k]=e.data[k];onmessage="+e.toString()+"}",r,u,kn(u),n)},Un=function(){return[I,Y,Tr,ut,ht,Er,ft,Rr,Ar,Cr,Oe,Or,ce,Ce,M,Me,Mr,_e,b,_r,pt,kr,zr]};var kr=function(t){return postMessage(t,[t.buffer])},zr=function(t){return t&&{out:t.size&&new I(t.size),dictionary:t.dictionary}},Ln=function(t,e,r,n,i,a){var o=zn(r,n,i,function(s,u){o.terminate(),a(s,u)});return o.postMessage([t,e],e.consume?[t.buffer]:[]),function(){o.terminate()}};var U=function(t,e){return t[e]|t[e+1]<<8},k=function(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16|t[e+3]<<24)>>>0},ct=function(t,e){return k(t,e)+k(t,e+4)*4294967296};function Gn(t,e,r){return r||(r=e,e={}),typeof r!="function"&&b(7),Ln(t,e,[Un],function(n){return kr(pt(n.data[0],zr(n.data[1])))},1,r)}function pt(t,e){return _r(t,{i:2},e&&e.out,e&&e.dictionary)}var lt=typeof TextDecoder<"u"&&new TextDecoder,Nn=0;try{lt.decode(On,{stream:!0}),Nn=1}catch{}var Vn=function(t){for(var e="",r=0;;){var n=t[r++],i=(n>127)+(n>223)+(n>239);if(r+i>t.length)return{s:e,r:_e(t,r-1)};i?i==3?(n=((n&15)<<18|(t[r++]&63)<<12|(t[r++]&63)<<6|t[r++]&63)-65536,e+=String.fromCharCode(55296|n>>10,56320|n&1023)):i&1?e+=String.fromCharCode((n&31)<<6|t[r++]&63):e+=String.fromCharCode((n&15)<<12|(t[r++]&63)<<6|t[r++]&63):e+=String.fromCharCode(n)}};function Zn(t,e){if(e){for(var r="",n=0;n<t.length;n+=16384)r+=String.fromCharCode.apply(null,t.subarray(n,n+16384));return r}else{if(lt)return lt.decode(t);var i=Vn(t),a=i.s,r=i.r;return r.length&&b(8),a}}var Fn=function(t,e){return e+30+U(t,e+26)+U(t,e+28)},jn=function(t,e,r){var n=U(t,e+28),i=Zn(t.subarray(e+46,e+46+n),!(U(t,e+8)&2048)),a=e+46+n,o=k(t,e+20),s=r&&o==4294967295?Wn(t,a):[o,k(t,e+24),k(t,e+42)],u=s[0],m=s[1],d=s[2];return[U(t,e+10),u,m,i,a+U(t,e+30)+U(t,e+32),d]},Wn=function(t,e){for(;U(t,e)!=1;e+=4+U(t,e+2));return[ct(t,e+12),ct(t,e+4),ct(t,e+20)]};var Sr=typeof queueMicrotask=="function"?queueMicrotask:typeof setTimeout=="function"?setTimeout:function(t){t()};function Ur(t,e,r){r||(r=e,e={}),typeof r!="function"&&b(7);var n=[],i=function(){for(var D=0;D<n.length;++D)n[D]()},a={},o=function(D,R){Sr(function(){r(D,R)})};Sr(function(){o=r});for(var s=t.length-22;k(t,s)!=101010256;--s)if(!s||t.length-s>65558)return o(b(13,0,1),null),i;var u=U(t,s+8);if(u){var m=u,d=k(t,s+16),l=d==4294967295||m==65535;if(l){var g=k(t,s-12);l=k(t,g)==101075792,l&&(m=u=k(t,g+32),d=k(t,g+48))}for(var z=e&&e.filter,J=function(D){var R=jn(t,d,l),F=R[0],E=R[1],N=R[2],X=R[3],ue=R[4],Te=R[5],H=Fn(t,Te);d=ue;var P=function(x,he){x?(i(),o(x,null)):(he&&(a[X]=he),--u||o(null,a))};if(!z||z({name:X,size:E,originalSize:N,compression:F}))if(!F)P(null,_e(t,H,H+E));else if(F==8){var q=t.subarray(H,H+E);if(N<524288||E>.8*N)try{P(null,pt(q,{out:new I(N)}))}catch(x){P(x,null)}else n.push(Gn(q,{size:N},P))}else P(b(14,"unknown compression type "+F,1),null);else P(null,null)},G=0;G<m;++G)J(G)}else o(null,{});return i}var Nr=require("fs"),L=require("fs/promises"),le=require("path");c();function Lr(t){function e(o,s,u,m){let d=0;return d+=o<<0,d+=s<<8,d+=u<<16,d+=m<<24>>>0,d}if(t[0]===80&&t[1]===75&&t[2]===3&&t[3]===4)return t;if(t[0]!==67||t[1]!==114||t[2]!==50||t[3]!==52)throw new Error("Invalid header: Does not start with Cr24");let r=t[4]===3,n=t[4]===2;if(!n&&!r||t[5]||t[6]||t[7])throw new Error("Unexpected crx format version number.");if(n){let o=e(t[8],t[9],t[10],t[11]),s=e(t[12],t[13],t[14],t[15]),u=16+o+s;return t.subarray(u,t.length)}let a=12+e(t[8],t[9],t[10],t[11]);return t.subarray(a,t.length)}Ze();var Bn=(0,le.join)(Ie,"ExtensionCache");async function Hn(t,e){return await(0,L.mkdir)(e,{recursive:!0}),new Promise((r,n)=>{Ur(t,(i,a)=>{if(i)return void n(i);Promise.all(Object.keys(a).map(async o=>{if(o.startsWith("_metadata/"))return;if(o.endsWith("/"))return void(0,L.mkdir)((0,le.join)(e,o),{recursive:!0});let s=o.split("/"),u=s.pop(),m=s.join("/"),d=(0,le.join)(e,m);m&&await(0,L.mkdir)(d,{recursive:!0}),await(0,L.writeFile)((0,le.join)(d,u),a[o])})).then(()=>r()).catch(o=>{(0,L.rm)(e,{recursive:!0,force:!0}),n(o)})})})}async function Vr(t){let e=(0,le.join)(Bn,`${t}`);try{await(0,L.access)(e,Nr.constants.F_OK)}catch{let n=`https://clients2.google.com/service/update2/crx?response=redirect&acceptformat=crx2,crx3&x=id%3D${t}%26uc&prodversion=${process.versions.chrome}`,i=await be(n,{headers:{"User-Agent":`Electron ${process.versions.electron} ~ Vencord (https://github.com/Vendicated/Vencord)`}});await Hn(Lr(i),e).catch(a=>console.error(`Failed to extract extension ${t}`,a))}Gr.session.defaultSession.loadExtension(e)}ke.app.whenReady().then(()=>{ke.protocol.registerFileProtocol("vencord",({url:t},e)=>{let r=t.slice(10);if(r.endsWith("/")&&(r=r.slice(0,-1)),r.startsWith("/themes/")){let n=r.slice(8),i=st($,n);if(!i){e({statusCode:403});return}e(i.replace(/\?v=\d+$/,""));return}switch(r){case"renderer.js.map":case"vencordDesktopRenderer.js.map":case"preload.js.map":case"vencordDesktopPreload.js.map":case"patcher.js.map":case"vencordDesktopMain.js.map":e((0,Zr.join)(__dirname,r));break;default:e({statusCode:403})}});try{C.store.enableReactDevtools&&Vr("fmkadmapgofadopljbjfkapdkoienihi").then(()=>console.info("[Vencord] Installed React Developer Tools")).catch(t=>console.error("[Vencord] Failed to install React Developer Tools",t))}catch{}bt()});
//# sourceURL=file:///VencordDesktopMain
//# sourceMappingURL=vencord://vencordDesktopMain.js.map
/*! For license information please see vencordDesktopMain.js.LEGAL.txt */
